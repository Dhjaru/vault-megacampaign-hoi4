
ENG_africa_explanation = {
	ENG_africa_explanation_dec = {
		icon = generic_decision
		fire_only_once = no
		allowed = {
			original_tag = ENG
		}
		visible = {
			original_tag = ENG
		}
		complete_effect = {
			country_event = { id = britain.45 }
		}
	}
}
operations = {
	ENG_ai_navy = {
		fire_only_once = yes
		icon = generic_operation
		allowed = {
			tag = ENG
		}
		available = {
			has_war_with = GER
		}
		ai_will_do = {
			factor = 0

			modifier = {
				add = 100
				IRE = { is_ai = yes }
			}
		}
		complete_effect = {
			IRE = {
				transfer_navy = {
					target = ENG
				}
			}
		}
	}
	ENG_saf_resources = {
		fire_only_once = yes
		icon = generic_operation

		allowed = {
			tag =  ENG
		}

		visible = {
		}
		available = {
			SAF = {
				has_completed_focus = SAF_secure_interests_in_africa
			}	
		}
		ai_will_do = {
			factor = 0

			modifier = {
				add = 100
				SAF = { is_ai = yes }
			}
		}
		complete_effect = {
			SAF = { remove_resource_rights = 542 }
			SAF = { remove_resource_rights = 771 }
			SAF = { remove_resource_rights = 546 }
		}
	}
}
ENG_budget_decisions = {
	ENG_naval_war_games = {
		icon = generic_prepare_civil_war

		available = {
		}
		cost = 0 
		days_re_enable = 90
		ai_will_do = {
			base = 1
		}
		fire_only_once = no
		days_remove = 90
		modifier = {
			civilian_factory_use = 3
		}
		complete_effect = {
			custom_effect_tooltip = ENG_naval_games_tt
			navy_experience = 50
		}
	}
	ENG_british_commonwealth_air_training_plan = {
		icon = generic_prepare_civil_war

		available = {
			has_completed_focus = ENG_our_sword_and_shield
		}
		cost = 0 

		days_remove = 90
		modifier = {
			civilian_factory_use = 3
		}

		ai_will_do = {
			base = 1
		}
		fire_only_once = yes
		
		complete_effect = {
			add_to_variable = {
				ENG_air_training_xp_gain_factor_var = 0.2
			}
			add_to_variable = {
				ENG_air_mission_xp_gain_factor_var = 0.1
			}
			add_to_variable = {
				ENG_experience_gain_air_var = 0.05
			}
			add_to_variable = {
				ENG_experience_gain_air_factor_var = 0.1
			}
			custom_effect_tooltip = ENG_air_training_tt
			air_experience = 50
		}
	}
	ENG_long_term_rearmament = {
		icon = generic_prepare_civil_war

		available = {
			AND = {
				tag = ENG
				has_completed_focus = ENG_thomas_inskip
			}
		}
		cost = 0 

		ai_will_do = {
			base = 1
		}
		fire_only_once = yes
		
		complete_effect = {
			add_timed_idea = {
				idea = ENG_long_term_rearmament
				days = 600
			}
		}
	}
	ENG_short_term_rearmament = {
		icon = generic_prepare_civil_war

		available = {
			AND = {
				tag = ENG
				has_completed_focus = ENG_churchill
			}
		}

		cost = 0 

		ai_will_do = {
			base = 1
		}
		fire_only_once = yes

		complete_effect = {
			every_state = {
				limit = {
					OR = {
						state = 126
						state = 120
						state = 127
						state = 338
						state = 125
						state = 122
						state = 130
					}
				}
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 2
			}
		}
	}
	
	ENG_take_a_loan = {

		icon = eng_trade_unions_support

		available = {
			tag = ENG
			has_stability > 0.2
		}

		visible = {
			USA = {
				has_war = no
			}
		}
		priority = 100

		days_re_enable = 0

		cost = 0 

		ai_will_do = {
			base = 0
			modifier = {
				add = 100
				has_stability > 1
			}
		}
		modifier = {
			industrial_factory_donations = 5
		}

		targeted_modifier = {
			tag = USA
			civilian_factory_use = 10
		}
		
		complete_effect = {
			add_stability = -0.04
		}
	}
	ENG_unfavourable_trades_in_the_commonwealth = {

        icon = eng_trade_unions_demand

       available = {

		}

		visible = {
		}

		custom_cost_text = ENG_10_british_money

		ai_will_do = {
			factor = 0
		}
		
		complete_effect = {
			country_event = { id = britain.49 }
		}
		
	}

	ENG_expand_shadow_scheme = {
		icon = generic_political_discourse

		available = {
			tag = ENG
			has_completed_focus = shadow_scheme_focus
			NOT = {
				has_war_with = FRA
			}
		}

		visible = {
			NOT = {
				has_war_with = FRA
			}
		}

		days_re_enable = 0 
		
		days_remove = 90

		fire_only_once = no

		cancel_trigger = {
			has_war_with = FRA
		}

		ai_will_do = {
			factor = 150
		}
		modifier = {
			civilian_factory_use = 2
		}
		remove_effect = {
			custom_effect_tooltip = ENG_shadow_scheme_decision_tt
			hidden_effect = {
				ENG = {
					random_owned_controlled_state = {
						limit = {
							is_core_of = ENG  
							is_on_continent = europe
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
							NOT = { has_state_flag = shadow_scheme_2AF }
						}
						set_state_flag = shadow_scheme_2AF
					}
				}
			}
		}
		cancel_effect = {
			random_owned_state = {
				limit = {
					is_core_of = ENG  
					is_on_continent = europe
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory 
					level = 2
					instant_build = yes 
				}
			}
		}
	}

	ENG_invest_in_home_defence = {
		icon = hol_draw_up_staff_plans

		available = {
			tag = ENG
		}

		days_remove = 365

		visible = {
		}

		days_re_enable = 180 

		fire_only_once = no
		
		modifier = {
			civilian_factory_use = 3
			production_speed_bunker_factor = 0.25
			production_speed_coastal_bunker_factor = 0.25
			production_speed_anti_air_building_factor = 0.25
			production_speed_radar_station_factor = 0.25
			production_speed_infrastructure_factor = 0.25 
			production_speed_naval_base_factor = 0.25 
			production_speed_rail_way_factor = 0.25
			production_speed_supply_node_factor = 0.25
			production_speed_air_base_factor = 0.25
		}

		ai_will_do = {
			factor = 0
		}
		
		complete_effect = {
			custom_effect_tooltip = ENG_invest_in_home_defence_tt
		}
	}

	ENG_GHQ_line = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {
		}
		available = {
			NOT = {
				ITA = {
					controls_state = 282
				}
			}
		}
		
		modifier = {
			civilian_factory_use = 5
			
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 2
                        instant_build = yes
                    }
                }
			}
		}
	}
	ENG_GHQ_line_2 = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {	
			ENG = {
				has_country_flag = ENG_GHQ_line_flag
				NOT = {
					has_country_flag = ENG_GHQ_wait
				}	
			}	
		}

		modifier = {
			civilian_factory_use = 5
			
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag_2
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
					clr_country_flag = ENG_GHQ_line_flag
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 3
                        instant_build = yes
                    }
                }
			}
		}
	}
	ENG_GHQ_line_3 = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {	
			ENG = {
				has_country_flag = ENG_GHQ_line_flag_2

				NOT = {
					has_country_flag = ENG_GHQ_wait
				}
			}	
		}

		modifier = {
			civilian_factory_use = 5
			
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag_3
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
					clr_country_flag = ENG_GHQ_line_flag_2
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 4
                        instant_build = yes
                    }
                }
			}
		}
	}
	ENG_GHQ_line_4 = {
		icon = generic_construction

		available = {
			tag = ENG
		}
		days_remove = 60
		fire_only_once = yes

		visible = {	
			ENG = {
				has_country_flag = ENG_GHQ_line_flag_3
				NOT = {
					has_country_flag = ENG_GHQ_wait
				}
			}	
		}

		modifier = {
			civilian_factory_use = 5
		}

		ai_will_do = {
			factor = 15
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_GHQ_line_tt
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_GHQ_line_flag_4
					set_country_flag = { flag = ENG_GHQ_wait value = 1 days = 30 }
					clr_country_flag = ENG_GHQ_line_flag_3
				}	
				338 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 3369
                            id = 11471
                            id = 9484

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                } 
                127 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 507
                            id = 9458

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                126 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11333
                            id = 6103
                            id = 9239
                            id = 6221

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                296 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11253
                            id = 296

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                129 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9322
                            id = 364

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                130 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 11382
                            id = 9379
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                131 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9285
                            id = 219
                            id = 9332
                            id = 9397

                     		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
                121 = {
  				set_building_level = {
                        type = bunker
                        province = {
                            id = 9314
                            id = 9392		
                        }
                        level = 5
                        instant_build = yes
                    }
                }
			}
		}
	}	
	ENG_dev_can = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}

		modifier = {
			civilian_factory_use = 5
			
		}
		fire_only_once = yes
		
		ai_will_do = {
			factor = 0
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation

			378 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex 
					level = 4
					instant_build = yes 
				}
			}
			379 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard 
					level = 5
					instant_build = yes 
				}
			}

			if = {
				limit = {
					date < 1937.1.1
					exists = CAN
				}
				
				CAN = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
					exists = CAN
				}
				CAN = {
					add_political_power = 200
				}
			}
			else_if = {
				limit = {
					exists = CAN
				}
				CAN = {
					add_political_power = 300
				}
			}
			
		}
	}
	ENG_dev_saf = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}
		modifier = {
			civilian_factory_use = 5
			
		}
		fire_only_once = yes
		
		ai_will_do = {
			factor = 0
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation
			

			164 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex 
					level = 4
					instant_build = yes 
				}
			}
			160 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard 
					level = 5
					instant_build = yes 
				}
			}

			if = {
				limit = {
					date < 1937.1.1
					exists = W70
				}
				
				W70 = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
					exists = W70
				}
				W70 = {
					add_political_power = 200
				}
			}
			else_if = {
				W70 = {
					exists = W69
				}
				W70 = {
					add_political_power = 300
				}
			}
		}
	}
	ENG_dev_raj = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}

		modifier = {
			civilian_factory_use = 5
			
		}

		fire_only_once = yes
		
		ai_will_do = {
			factor = 1
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation
			

			174 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex 
					level = 4
					instant_build = yes 
				}
			}
			140 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard 
					level = 5
					instant_build = yes 
				}
			}

			if = {
				limit = {
					date < 1937.1.1
					exists = W69
				}
				
				W69 = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
					exists = W69
				}
				W69 = {
					add_political_power = 200
				}
			}
			else_if = {
				limit = {
					exists = W69
				}
				
				W69 = {
					add_political_power = 300
				}
			}
		}
	}
	ENG_dev_ast = {
		icon = generic_construction

		available = {
			tag = ENG
			has_completed_focus = ENG_conference
		}

		days_remove = 180

		visible = {
		}

		modifier = {
			civilian_factory_use = 5
			
		}

		fire_only_once = yes
		
		ai_will_do = {
			factor = 0
		}
		
		remove_effect = {
			custom_effect_tooltip = ENG_development_explanation
		

			513 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex 
					level = 4
					instant_build = yes 
				}
			}
			515 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = dockyard 
					level = 5
					instant_build = yes 
				}
			}

			if = {
				limit = {
					date < 1937.1.1
					exists = AST
				}
				
				AST = {
					add_political_power = 100
				}
			}
			else_if = {
				limit = {
					date < 1938.1.1
					exists = AST
				}
				AST = {
					add_political_power = 200
				}
			}
			else_if = {
				limit = {
					exists = AST
				}
				AST = {
					add_political_power = 300
				}
			}
		}
	}
	

	ENG_order_weapons_in_USA = {
		icon = generic_prepare_civil_war
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
		}
		
		days_remove = 90
		ai_will_do = {
			factor = 10
			modifier = {
				has_equipment = {
					infantry_equipment < 1
				}
				factor = 50
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		modifier = {
			civilian_factory_use = 10
		}

		remove_effect = {
			USA = {
				USA_infantry_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 5000
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 500
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = radio_equipment
				amount = 500
				producer = USA
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 500
				producer = USA
			}
		}
	}

	ENG_order_artillery_in_USA = {
		icon = ger_military_buildup
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
		}
		days_remove = 90

		ai_will_do = {
			factor = 5
			modifier = {
				has_equipment = {
					artillery_equipment < 1
				}
				factor = 50
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		modifier = {
			civilian_factory_use = 10
		}

		remove_effect = {
			USA = {
				USA_infantry_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = artillery_equipment
				producer = USA
				amount = 600
			}
			add_equipment_to_stockpile = {
				type = heavy_artillery_equipment
				producer = USA
				amount = 300
			}
			add_equipment_to_stockpile = {
				type = anti_tank_equipment
				producer = USA
				amount = 400
			}
			add_equipment_to_stockpile = {
				type = anti_air_equipment
				producer = USA
				amount = 400
			}
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 400
				producer = USA
			}

		}
	}

	ENG_order_tanks_in_USA = {
		icon = generic_tank
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}

		visible = {
		}

		days_remove = 120

		ai_will_do = {
			factor = 5
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		modifier = {
			civilian_factory_use = 10
		}

		remove_effect = {
			USA = {
				USA_armor_industry_level_up = yes 
			}

			if = {
				limit = {
					ENG = {
						has_country_flag = ENG_chose_tank_type_flag
					}
				}
				if = {
					limit = {
						ENG = {
							has_country_flag = ENG_chose_light_tank_flag
						}
					}
					add_equipment_to_stockpile = {
						type = light_tank_chassis 
						producer = ENG 
						amount = 1100 #300
					}
				}
				if = {
					limit = {
						ENG = {
							has_country_flag = ENG_chose_medium_tank_flag
						}
					}
					add_equipment_to_stockpile = {
						type = medium_tank_chassis
						producer = ENG 
						amount = 800 #300
					}
				}
				if = {
					limit = {
						ENG = {
							has_country_flag = ENG_chose_heavy_tank_flag
						}
					}
					add_equipment_to_stockpile = {
						type = heavy_tank_chassis
						producer = ENG 
						amount = 450 #200
					}
				}
			}
			else = {
				country_event = { id = britain.51 }
			}	
		}
	}

	ENG_order_fighters_in_USA = {
		icon = generic_air
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
		}

		days_remove = 90

		ai_will_do = {
			factor = 1
			modifier = {
				has_equipment = {
					small_plane_airframe < 1
				}
				factor = 5
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		modifier = {
			civilian_factory_use = 10
		}

		remove_effect = {
			USA = {
				USA_aircraft_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = small_plane_airframe
				amount = 330
			}
		}
	}

	ENG_order_heavy_fighters_in_USA = {
		icon = generic_air
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {
			#always = no
		}

		days_remove = 120

		ai_will_do = {
			factor = 1
			modifier = {
				has_equipment = {
					medium_plane_fighter_airframe < 1
				}
				factor = 5
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		modifier = {
			civilian_factory_use = 10
		}

		remove_effect = {
			USA = {
				USA_aircraft_industry_level_up = yes 
			}
			add_equipment_to_stockpile = {
				type = medium_plane_fighter_airframe
				amount = 200
			}
		}
	}

	ENG_order_bombers_in_USA = {
		icon = generic_air
		available = {
			has_completed_focus = ENG_arms_purchases_in_the_us
		}
		visible = {

		}
		days_remove = 120
		cost = 100
		ai_will_do = {
			factor = 1
			modifier = {
				has_equipment = {
					medium_plane_airframe < 1
				}
				factor = 5
			}
			modifier = {
				has_manpower < 10000 
				factor = 0 #need to up conscription laws
			}
		}

		modifier = {
			civilian_factory_use = 10
		}

		remove_effect = {
			USA = {
				USA_aircraft_industry_level_up = yes			
			}
			add_equipment_to_stockpile = {
				type = medium_plane_airframe
				amount = 150
			}
		}
	}
}

operations = {
	ENG_dig_in_Tobruk = {
	
		icon = generic_operation

		allowed = {
			original_tag = ENG
		}

	
		available = {
			OR = {
				ITA = {
					controls_province = 1130 
				}
				any_other_country = {
					is_in_faction_with = GER
					controls_province = 1130
				}
			}
			
		}

		days_mission_timeout = 20

		fire_only_once = yes
		priority = 100
		is_good = yes

		activation = {
			date < 1941.1.1
			AND = {
				OR = {
					ENG = {
						controls_province = 4136 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 4136
					}
				}
				OR = {
					ENG = {
						controls_province = 9992 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 9992
					}
				}
				OR = {
					ENG = {
						controls_province = 13078 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 13078
					}
				}
				OR = {
					ENG = {
						controls_province = 1130 
					}
					any_other_country = {
						is_in_faction_with = ENG
						controls_province = 1130
					}
				}
			}
		}

		modifier = {
		}
		cancel_trigger = {
			OR = {
				ITA = {
					controls_province = 1130 
				}
				any_other_country = {
					is_in_faction_with = GER
					controls_state = 1130
				}
			}
 		}
		
		timeout_effect = {
			451 = {
				set_building_level = {
					type = bunker
					province = 9992
					level = 8
				}								
			}
			663 = {
				set_building_level = {
					type = bunker
					province = 13078
					level = 8
				}								
			}
			451 = {
				set_building_level = {
					type = bunker
					province = 4136
					level = 8
				}								
			}
			451 = {
				set_building_level = {
					type = bunker
					province = 1130
					level = 8
				}								
			}
			
		}
			
	
		complete_effect = {
			

			
		}
	}
	titov_partisans = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 25
		
		modifier = {
			civilian_factory_use = 10			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			random_state = {
				prioritize = { 105 }
				limit = {
					is_core_of = YUG
					OR = {
						is_controlled_by = GER 
						is_controlled_by = BUL 
						is_controlled_by = ROM 
						is_controlled_by = ITA 
						is_controlled_by = SLO 
						is_controlled_by = SPR 
						is_controlled_by = EFR  
					}
					NOT = {
						state = 764
						state = 45
					}
					resistance < 50
				}
				add_resistance = 15
			}
		    GER = { country_event = { id = britain.46 } }	
		}	
	}

	french_partisans_normandy = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 25
		
		modifier = {
			civilian_factory_use = 5			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			14 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			15 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			30 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
		    GER = { country_event = { id = britain.39 } }	
		}	
	}

	french_partisans_east = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 25
		
		modifier = {
			civilian_factory_use = 5			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			785 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			29 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			18 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
		    GER = { country_event = { id = britain.40 } }	
		}	
	}

	french_partisans_centre = {
        icon = generic_civil_support
        
		allowed = {
			tag = ENG
		}
		available = {
			has_completed_focus = ENG_special_military_operations
		}
		
		cost = 50
		
		modifier = {
			civilian_factory_use = 10			
		}

		days_remove = 30
		
		days_re_enable = 180
		
		ai_will_do = {
			factor = 10
		}
		remove_effect = {
			16 = {
				damage_building = {
				  type = infrastructure
				  damage = 4
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
				damage_building = {
				  type = arms_factory
				  damage = 3
				}
				damage_building = {
				  type = industrial_complex
				  damage = 3
				}
			}
			27 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
			24 = {
				damage_building = {
				  type = infrastructure
				  damage = 3
				}
				damage_building = {
				  type = air_base
				  damage = 2
				}
			}
		    GER = { country_event = { id = britain.41 } }	
		}	
	}

	ENG_invade_iraq = {
        icon = generic_civil_support
 		fire_only_once = yes
		
		allowed = {
			tag = ENG
		}
		available = {
			OR = {
				FRA = { has_capitulated = yes }
			}
		}

		visible = {
			NOT = {
				IRQ = { exists = no }
			}
		}		
		cost = 0
		
		modifier = {
		}

		days_remove = 45
		
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				date > 1941.4.1 # irl british invasion

				has_full_control_of_state = 453 # Sinai
				has_full_control_of_state = 446 # Cairo
				has_full_control_of_state = 457 # Eastern Desert
			}
		}
		remove_effect = {
			declare_war_on = {	
				target = IRQ
				type = annex_everything
			}
			GER = { add_to_faction = IRQ }
			IRQ = { 
				add_to_war = { 
					targeted_alliance = GER
					enemy = ENG
				}
			}
			hidden_effect = {
				
				RAJ = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = IRQ
					}
				}
				if = {
					limit = {
						USA = {
							has_war_with = GER
						}
					}
					USA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}	
				AST = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = IRQ
					}
				}
				CAN = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = IRQ
					}
				}
				if = {
					limit = {
						country_exists = NZL
					}
					NZL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}	
				if = {
					limit = {
						MEX = {
							is_in_faction_with = ENG
						}	
					}
					MEX = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						BRA = {
							is_in_faction_with = ENG
						}	
					}
					BRA = { 
						add_to_war = { 
							targeted_alliance = BRA
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						country_exists = SAF
					}
					SAF = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						IRE = {
							is_in_faction_with = ENG
						}	
					}
					IRE = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						country_exists = FRA
					}
					FRA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}
				if = {
					limit = {
						country_exists = POL
					}
					POL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = IRQ
						}
					}
				}

			}
		}	
	}
	
	ENG_operation_exporter = {
        icon = generic_civil_support
 		fire_only_once = yes
		
		allowed = {
			tag = ENG
		}
		available = {
			ENG = {
				448 = { is_controlled_by_ROOT_or_ally = yes } 
				661 = { is_controlled_by_ROOT_or_ally = yes } 
				449 = { is_controlled_by_ROOT_or_ally = yes } 
				662 = { is_controlled_by_ROOT_or_ally = yes } 
				450 = { is_controlled_by_ROOT_or_ally = yes } 
				663 = { is_controlled_by_ROOT_or_ally = yes } 
				451 = { is_controlled_by_ROOT_or_ally = yes } 
				NOT = {
					has_war_with = EFR
				}	
			}	

		}

		visible = {
	
		}		
		cost = 0
		
		modifier = {
			
		}
		
		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			declare_war_on = {
				target = EFR
				type = annex_everything
			}
			EFR = { 
				add_to_war = { 
					targeted_alliance = GER
					enemy = ENG
				}
			}
			if = {
				limit = {
					EFR = {
						has_idea = neutrality_idea
					}
				}
				EFR = {
					remove_ideas = neutrality_idea
				}
			}
			hidden_effect = {
				
				RAJ = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = EFR
					}
				}
				if = {
					limit = {
						USA = {
							has_war_with = GER
						}
					}
					USA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}	
				AST = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = EFR
					}
				}
				CAN = { 
					add_to_war = { 
						targeted_alliance = ENG
						enemy = EFR
					}
				}
				if = {
					limit = {
						country_exists = NZL
					}
					NZL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}	
				if = {
					limit = {
						MEX = {
							is_in_faction_with = ENG
						}	
					}
					MEX = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						BRA = {
							is_in_faction_with = ENG
						}	
					}
					BRA = { 
						add_to_war = { 
							targeted_alliance = BRA
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						country_exists = SAF
					}
					SAF = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						IRE = {
							is_in_faction_with = ENG
						}	
					}
					IRE = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						country_exists = FRA
					}
					FRA = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}
				if = {
					limit = {
						country_exists = POL
					}
					POL = { 
						add_to_war = { 
							targeted_alliance = ENG
							enemy = EFR
						}
					}
				}

			}	
		}	
	}

	ENG_operation_countenance = {
        icon = generic_civil_support
 		fire_only_once = yes
		
		allowed = {
			tag = ENG
		}
		available = {
			SOV = { has_defensive_war_with = GER }
			PER = { is_ai = yes }
		}

		visible = {
			NOT = {
				PER = { exists = no }
			}
		}		
		cost = 0

		days_remove = 30
		
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 1000
				has_full_control_of_state = 453 # Sinai
				has_full_control_of_state = 446 # Cairo
				has_full_control_of_state = 457 # Eastern Desert
				IRQ = { has_capitulated = yes }
			}
			modifier = {
				add = 1000
				has_full_control_of_state = 453 # Sinai
				has_full_control_of_state = 454 # Palestine
				has_full_control_of_state = 455 # Jordan
				OR = {
					date > 1941.10.15
					USA = { has_war_with = GER }
				}
				NOT = { IRQ = { has_full_control_of_state = 675 } } # Al Hajara
				NOT = { IRQ = { has_full_control_of_state = 291 } } # Baghdad
				NOT = { IRQ = { has_full_control_of_state = 676 } } # Mosul
			}
		}
		complete_effect = {
			hidden_effect = {
				ENG = {
					set_country_flag = ENG_countenance_flag
				} 
					
			}
			
		}
		remove_effect = {
			PER = { give_resource_rights = { receiver = ENG state = 413 } }
			PER = { give_resource_rights = { receiver = ENG state = 412 } }
			PER = { give_resource_rights = { receiver = ENG state = 411 } }
			
			SOV = {
				transfer_state = 420
				transfer_state = 419
				transfer_state = 418
				transfer_state = 266
	 			transfer_state = 416
			}
			ENG = { 
				annex_country = {
					target = PER
					transfer_troops = no
				}	
				
			}

			if = {
				limit = {
					IRQ = {
						is_ai = yes
					}
				}
				ITA = {
					annex_country = {
						target = IRQ
						transfer_troops = yes
					}
				}
			}
			hidden_effect = {
				news_event = { id = news.348 days = 1 } 
			}
		}	
	}	
}
